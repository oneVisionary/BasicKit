<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Expense Tracker - Python Basic Toolkit</title>
    <link rel="stylesheet" href="static/style.css">
</head>
<body>
    <div class="tool-header">
        <div class="container">
            <div class="breadcrumb">
                <a href="{{url_for('index')}}">üè† Home</a> / üí∞ Expense Tracker
            </div>
            <h1 class="tool-title">üí∞ Expense Tracker</h1>
        </div>
    </div>

    <main class="main">
        <div class="container">
            <div class="tool-content">
              <button class="back-btn" onclick="window.location.href='{{ url_for('index') }}'">‚Üê Back to Toolkit</button>
                
                <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(200px, 1fr)); gap: 1rem; margin-bottom: 2rem;">
                    <div class="input-group">
                        <label for="expenseDescription">Description</label>
                        <input type="text" id="expenseDescription" placeholder="What did you spend on?">
                    </div>
                    <div class="input-group">
                        <label for="expenseAmount">Amount ($)</label>
                        <input type="number" id="expenseAmount" placeholder="0.00" step="0.01">
                    </div>
                    <div class="input-group">
                        <label for="expenseCategory">Category</label>
                        <select id="expenseCategory">
                            <option value="Food">Food</option>
                            <option value="Transportation">Transportation</option>
                            <option value="Entertainment">Entertainment</option>
                            <option value="Shopping">Shopping</option>
                            <option value="Bills">Bills</option>
                            <option value="Health">Health</option>
                            <option value="Other">Other</option>
                        </select>
                    </div>
                    <div class="input-group">
                        <label for="expenseDate">Date</label>
                        <input type="date" id="expenseDate">
                    </div>
                </div>

                <button class="btn" onclick="addExpense()">Add Expense</button>

                <div id="totalAmount" style="background: #667eea; color: white; padding: 1rem; border-radius: 8px; margin: 2rem 0; text-align: center;">
                    <h3>Total Expenses: $<span id="totalValue">0.00</span></h3>
                </div>

                <div id="expenseList">
                    <!-- Expenses will be added here -->
                </div>

                <div style="margin-top: 2rem;">
                    <button class="btn btn-danger" onclick="clearAllExpenses()">Clear All Expenses</button>
                </div>
            </div>
        </div>
    </main>

    <script src="static/main.js"></script>
    <script>
        let expenses = JSON.parse(localStorage.getItem('expenses') || '[]');

        function renderExpenses() {
            const expenseList = document.getElementById('expenseList');
            expenseList.innerHTML = '';

            let total = 0;

            expenses.forEach((expense, index) => {
                total += expense.amount;
                
                const expenseDiv = document.createElement('div');
                expenseDiv.className = 'expense-item';
                expenseDiv.innerHTML = `
                    <div style="display: flex; justify-content: space-between; align-items: center;">
                        <div>
                            <h4>${expense.description}</h4>
                            <p style="color: #718096; margin: 0.5rem 0;">
                                ${expense.category} ‚Ä¢ ${expense.date}
                            </p>
                        </div>
                        <div style="text-align: right;">
                            <strong style="font-size: 1.2rem; color: #e53e3e;">$${expense.amount.toFixed(2)}</strong>
                            <br>
                            <button class="btn btn-danger" onclick="deleteExpense(${index})" style="padding: 0.3rem 0.8rem; margin-top: 0.5rem;">Delete</button>
                        </div>
                    </div>
                `;
                expenseList.appendChild(expenseDiv);
            });

            document.getElementById('totalValue').textContent = total.toFixed(2);
        }

        function addExpense() {
            const description = document.getElementById('expenseDescription').value.trim();
            const amount = parseFloat(document.getElementById('expenseAmount').value);
            const category = document.getElementById('expenseCategory').value;
            const date = document.getElementById('expenseDate').value;

            if (!description || !amount || amount <= 0 || !date) {
                alert('Please fill in all fields with valid values!');
                return;
            }

            expenses.push({
                description,
                amount,
                category,
                date
            });

            // Clear inputs
            document.getElementById('expenseDescription').value = '';
            document.getElementById('expenseAmount').value = '';
            document.getElementById('expenseDate').value = '';

            saveExpenses();
            renderExpenses();
        }

        function deleteExpense(index) {
            expenses.splice(index, 1);
            saveExpenses();
            renderExpenses();
        }

        function clearAllExpenses() {
            if (confirm('Are you sure you want to clear all expenses?')) {
                expenses = [];
                saveExpenses();
                renderExpenses();
            }
        }

        function saveExpenses() {
            localStorage.setItem('expenses', JSON.stringify(expenses));
        }

        // Set today's date as default
        document.getElementById('expenseDate').valueAsDate = new Date();

        // Initial render
        renderExpenses();
    </script>
</body>
</html>